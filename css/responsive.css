/* merged responsive.css */

@media (pointer: fine){
	  .tap-hint{ display:none; }
	}


@media (pointer: coarse){
  .cmd-carousel{ display:block; }
  #commanderGrid{ display:none; } /* hide grid on touch devices */
  .carousel-arrow{
    font-size:82px;
    padding:10px;
  }
  
  #pickerGrid{ display:none; }
  #pickerBody{ overflow:hidden; min-height:0; }
	
  #unitSwapModal .modal-grid{
	grid-template-columns:repeat(2, 1fr);
  }
  /* Use carousel on mobile, keep grids for desktop */
  #unitSwapGrid{ display:none; }
  #unitReplaceGrid{ display:none; } /* we’ll show carousel instead */
  #unitSwapModal .modal-body{
	overflow:hidden;
	min-height:0;
  }
  
   .carousel{
	scroll-snap-type:x mandatory;
  }
  .carousel > *{
	scroll-snap-align:start;
  }
	  /* Make sure the commander modal body is a bounded flex area */
  #commanderModal .modal-content{
	max-height:88vh;      /* or your chosen value */
	height:88vh;          /* important: gives modal a definite height */
  }

  #commanderModal .modal-body{
	flex:1 1 auto;
	min-height:0;         /* CRITICAL in flex layouts to allow children to shrink */
	overflow:hidden;      /* prevents scroll caused by carousel overflow */
	padding:6px 6px 6px;
  }
  
  #commanderCarousel{
	overflow:hidden;
	padding:6px 0 16px;
  }

  #commanderTrack{
	height:100%;
  }

 /* Add padding so the focused card sits centered with room to see neighbors */
  .cmd-track{
	padding: 0 10vw;   /* controls peek amount */
	box-sizing:border-box;
  }

  /* Each slide is narrower so adjacent slides remain partially visible */
  .cmd-slide{
	flex: 0 0 66vw;    /* card window width; neighbors will peek */
	margin: 0;         /* IMPORTANT: remove margins */
	padding: 6px 0;
	box-sizing:border-box;
	display:flex;
	align-items:center;
	justify-content:center;
  }

  /* Keep the card from exceeding the modal body height */
  .cmd-card{
	max-height:100%;
	height:auto;
  }

/* Upgrade modal swipe carousel (mobile) */
.upgrade-carousel{ width:100%; overflow:hidden; }
.upgrade-track{
  display:flex;
  gap:12px;
  will-change:transform;
  touch-action:pan-y; /* allow vertical scroll in modal, horizontal swipe on track */
}
.upgrade-track.is-animating{ transition:transform 280ms ease; }

.upg-slide{
  flex:0 0 84%;          /* makes neighbors peek */
}
.upg-card{
  width:100%;
  height:360px;          /* tune for your modal */
  border:4px solid var(--khaki);
  background:rgba(0,0,0,0.25);
  position:relative;
  box-sizing:border-box;
  overflow:hidden;
}

.upg-card.is-active{ transform:scale(1); opacity:1; }
.upg-card:not(.is-active){ transform:scale(0.94); opacity:0.55; }

.upg-card img{
  width:100%;
  height:100%;
  object-fit:contain;
  display:block;
  background:#111;
}

/* Use your existing rarity border colors by class */
.upg-card.common{ border-color:var(--common); }
.upg-card.veteran{ border-color:var(--veteran); }
.upg-card.elite{ border-color:var(--elite); border-width:8px; }
.upg-card.legendary{ border-color:var(--legendary); border-width:8px; }
  
  .tap-hint{
	animation:hintPulse 1.2s ease-out 1;
	background:rgba(0,0,0,0.75);
	cursor:pointer;
	border:1px solid var(--khaki);
	color:var(--paper);
	z-index:2;
	pointer-events:auto; /* allow tapping badge */
	position:absolute;
	  top:10px;
	  right:10px;
	  left:auto;            /* ensure it’s NOT top-left */
	  z-index:5;

	  /* 50% bigger */
	  font-size:18px;       /* was ~12px */
	  padding:6px 12px;     /* was ~4px 8px */
	  border-width:2px;     /* if you had a 1px border */
	  border-radius:6px;

	  /* keep existing look if you already styled it */
	  text-transform:uppercase;
	  font-weight:700;
	  letter-spacing:0.5px;
  }
}


@media (max-width: 720px){
  #upgradeGrid{ display:none; }
  #upgradeCarousel{ display:block !important; }
  #pickerGrid{ display:none; }
  #pickerCarousel{ display:block !important; }
  

	.ai-launchers{
	  flex-direction:column;
	  flex: 1;
	  justify-content: center;
	  align-items: center;
	}
		
	.left-controls{
	  flex-direction:row;
	}
	
  body{ padding:6px; }

  .header{
	flex-direction:column;
	gap:10px;
  }

  h1{
	padding:12px 14px;
	font-size:18px;
  }
  
  
  .controls{
	flex-direction:column;
	gap:14px;
	padding:6px;
	min-height:75vh;
  }

  .commander-controls{
	flex-direction:column;
	gap:12px;
	align-items:center;
	flex:2;
  }

  .buildable h3{
	margin-top:6px;
  }

  .add-upgrade,
  .upgrade-tile{
	width:150px;
	height:320px;
	position:relative;
  }

  .modal-content{
	width:96vw;
	max-height:90vh;
  }

  .modal-grid{
	grid-template-columns:repeat(2, 1fr);
	gap:12px;
  }

  button{
	padding:18px 24px; /* bigger touch target */
	font-size:16px;
  }
	  
  .build-slots{
	gap:10px;
  }
  
  .xp-buttons{
	gap:14px;              /* give buttons breathing room */
  }

  /* Give each slot enough height so the card is readable */
  .build-slot{
	min-height:280px;
  }
  
  .xp-panel{
	width:100%;
	padding: 5px;
  }
  
  .commander-tile{
	margin:0 auto;
	box-shadow:0 0 20px rgba(196,154,44,0.35);
  }
  
   /* Shrink commander modal to fit screen */
  #commanderModal .modal-content{
	width:94vw;
	max-height:82vh;   /* was ~86–90vh */
  }

  #commanderModal .modal-body{
	padding:8px 8px 12px;
  }
}

/* Mobile landscape: keep picker carousel readable and never taller than the modal */
@media (pointer: coarse) and (orientation: landscape){

	h1{
		padding:10px 10px;
	}
	
  h2{
	  font-size:small;
	  margin:8px 0 6px;
  }
  
  #aiCardModalContent > .modal-body{
	  flex-direction:row;
	  justify-content: center;
  }
  
	  
	.ai-card-stage > img{
	  height:70vh;
	}
	
  .controls{
	flex-direction:row;
	height:100vh;
	}
	
	.commander-tile{
		padding:4px;
	}
	
	.commander-controls{
		gap:0px;
	}
	
	.build-slot{
		padding:2px;
	}
	
	.build-slot-title{
		display:none;
	}
  /* Give the modal a definite height so children can size correctly */
  #pickerModal .modal-content{
    height: 92vh;
    max-height: 92vh;
  }

  /* Make modal-body a bounded flex column area */
  #pickerModal .modal-body{
    flex: 1 1 auto;
    min-height: 0;
    overflow: hidden; /* IMPORTANT: prevent content from spilling outside */
  }

  /* Let the carousel shell be the scroll-free flexible region */
  #pickerModal .carousel-shell{
    flex: 1 1 auto;
    min-height: 0;
  }

  /* Ensure carousel/track are height-bounded */
  #pickerCarousel{
    flex: 1 1 auto;
    min-height: 0;
    padding: 4px 0 6px;
  }

  /* Hard clamp the “card window” height so images can’t exceed it */
  #pickerModal .picker-card{
    max-height: 62vh;   /* tweak: 55–65vh usually feels right in landscape */
  }

  #pickerModal .picker-card img{
    height: auto;       /* don’t force height:100% */
    max-height: 62vh;   /* match the card clamp */
    width: auto;
    max-width: 100%;
  }
}
